#
# Setup macOS environment
#

# Enable Tap to Click
defaults write com.apple.AppleMultitouchTrackpad Clicking -bool true
sudo defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
sudo defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
sudo defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1

# Install Amethyst (Tiled Window Manager)
brew cask install amethyst

# Copy Preferences for Amethyst
cp Preferences/com.amethyst.Amethyst.plist ~/Library/Preferences

# Download Privacy_Services_Management Tool
curl -L https://github.com/univ-of-utah-marriott-library-apple/privacy_services_manager/releases/download/1.7.2/Privacy_Services_Management_1.7.2.dmg -o /tmp/Privacy_Services_Management_1.7.2.dmg

# Mount
hdiutil attach /tmp/Privacy_Services_Management_1.7.2.dmg -mountpoint /Volumes/PSM -nobrowse

# Install
# XXX probably download cocoasudo for sudo...
sudo installer -pkg "/Volumes/PSM/Privacy Services Management [1.7.2].pkg" -target /

# use tool to grant accessibility access to Amethyst

# Apply LaunchAgents
cp LaunchAgents/npyl.Amethyst.plist ~/Library/LaunchAgents

#
# Setup environment for development
#

# First the conky libraries
brew install cmake freetype gettext lua imlib2 pkg-config
brew link gettext --force

# Clone My Repos
git clone --recurse-submodules https://github.com/Conky-for-macOS/Manage-Conky
git clone https://github.com/npyl/npyl.github.io
